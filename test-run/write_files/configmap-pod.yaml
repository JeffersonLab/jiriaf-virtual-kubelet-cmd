kind: ConfigMap
apiVersion: v1
metadata:
  name: u1-j1
  namespace: default
data:
  u1-j1.sh: |
    #!/bin/bash
     sleep 10
     sleep 11
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: u1-j2
  namespace: default
data :
  u1-j2.sh: |
    #!/bin/bash
     sleep 12
     sleep 13
     
---

kind: ConfigMap
apiVersion: v1
metadata:
  name: u2-j1
  namespace: default
data:
  u2-j1.sh: |
    #!/bin/bash
     sleep 14
     sleep 15

---

apiVersion: v1
kind: Pod
metadata:
  name: multijobs
spec:
  containers:
  - name: u1
    image: u1
    command: [""]
    volumeMounts:
    - name: u1-j1
      # read from configmap
      mountPath: u1-j1
    - name: u1-j2
      mountPath: u1-j2 # path is auto generated by vk, the rule is: $HOME/podname/configmapname/volumename.

  - name: u2
    image: u2
    command: [""]
    volumeMounts:
    - name: u2-j1
      mountPath: u2-j1 # path is auto generated by vk, the rule is: $HOME/podname/configmapname/volumename.

  volumes:
    - name: u1-j1
      configMap:
        name: u1-j1
    
    - name: u1-j2
      configMap:
        name: u1-j2

    - name: u2-j1
      configMap:
        name:  u2-j1

        
  nodeSelector:
    kubernetes.io/role: agent
  tolerations:
  - key: "virtual-kubelet.io/provider"
    value: "mock"
    effect: "NoSchedule"


---
