kind: ConfigMap
apiVersion: v1
metadata:
  name: job1
  namespace: default
data:
  job1.job: |
    #!/bin/bash
    echo $message1
    echo $message2

---

kind: ConfigMap
apiVersion: v1
metadata:
  name: support
  namespace: default
data:
  support.sh: |
    #!/bin/bash
    echo $message3

---

apiVersion: v1
kind: Pod
metadata:
  name: multijobs
spec:
  containers:
  - name: job1
    image: job1
    command: ["/bin/bash"]
    env:
    - name: message1
      value: "I'm env1"
    - name: message2
      value: "I'm env2"
    - name: message3
      value: "I'm env3"

    volumeMounts:
    - name: job1
      mountPath: ~/job1
    - name: support
      mountPath: ~/support
    resources:
      limits:
        cpu: "1"
        memory: 1Gi


  volumes:
    - name: job1 
      configMap:
        name: job1
    - name: support
      configMap:
        name: support

        
  nodeSelector:
    kubernetes.io/role: agent
  tolerations:
  - key: "virtual-kubelet.io/provider"
    value: "mock"
    effect: "NoSchedule"


---
