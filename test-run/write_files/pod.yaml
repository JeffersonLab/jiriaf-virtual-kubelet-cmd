# https://kubernetes.io/docs/concepts/configuration/configmap/
kind: ConfigMap
apiVersion: v1
metadata:
  name: user1
  namespace: default
data:
  #key value pairs
  hello.sh: |
    #!/bin/bash
    echo "Hello World" > ~/test1.txt && sleep 10
---
kind: ConfigMap
apiVersion: v1
metadata:
  name: user2
  namespace: default
data:
  #key value pairs
  good.sh: |
    #!/bin/bash
    echo "I am good" > ~/test2.txt && sleep 60

---

# https://kubernetes.io/docs/concepts/workloads/pods/
apiVersion: v1
kind: Pod
metadata:
  name: multijobs
spec:
  containers:
  - name: job-user1
    image: user1
    command: [""]
    volumeMounts:
    - name: user1
      mountPath: "/no/effect" # path is auto generated by vk, the rule is: $HOME/podname/configmapname/volumename.

  - name: job-user2
    image: user2
    command: [""]
    volumeMounts:
    - name: user2
      mountPath: "/no/effect"

  volumes:
    - name: user1
      configMap:
        name:  user1

    - name: user2
      configMap:
        name:  user2

        
  nodeSelector:
    kubernetes.io/role: agent
  tolerations:
  - key: "virtual-kubelet.io/provider"
    value: "mock"
    effect: "NoSchedule"


---
